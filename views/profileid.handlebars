<link rel="stylesheet" href="/css/profile.css">

<div class="container">
    <h2>Thông tin chi tiết nhân viên</h2>
    <div class="row">
        <div class="col-md-4">
            <!-- Avatar -->
            <div class="image-container">
                <button class="btn btn-outline-secondary" id="btnChooseFile"><i class="fa-solid fa-cloud-arrow-up"></i></button>
                <img src="/uploads/avatars/{{profilePicture}}" alt="Avatar" class="img-fluid rounded-circle w-100" id="profilePicture">
            </div>
            
            {{#if error}}
                <div class="alert alert-danger text-center">{{error}}</div>
            {{/if}}

            {{#if success}}
                <div class="alert alert-success text-center">{{success}}</div>
            {{/if}}
        </div>
        <div class="col-md-8">
            <!-- Email -->
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" class="form-control" value="{{email}}" readonly>
            </div>
            <!-- Tên người dùng -->
            <div class="form-group">
                <label for="fullname">Họ và tên:</label>
                <input type="text" id="fullname" name="fullname" class="form-control" value="{{fullname}}" readonly>
            </div>
            <!-- Mật khẩu người dùng -->
            <div class="form-group">
                <label for="fullname">Mật khẩu:</label>
                <input type="text" id="fullname" name="fullname" class="form-control" value="{{password}}" readonly>
            </div>

            <a href="/account-management">Quay lại</a>
        </div>
    </div>
</div> 

{{!-- Form thay đổi ảnh avatar --}}
<form action="/profile" method="post" enctype="multipart/form-data" class="d-none">
    <input type="file" accept="image/*" id="file" name="file">
    <input type="submit" id="submit" value="Upload">
</form>

<script>
    let file = document.getElementById("file");
    let btnChooseFile = document.getElementById("btnChooseFile");
    let submit = document.getElementById("submit");

    btnChooseFile.addEventListener("click", () => {
        file.click();
    })

    // Upload ảnh lên server sau khi chọn file
    file.addEventListener("change", () => {
        submit.click();
    })
</script>